---
title: 'Cron触发器 教程'
---

## Introduction

cron是已存在很长时间的UNIX工具，因此其调度功能强大且经过验证。 CronTrigger类基于cron的调度功能  
cron is a UNIX tool that has been around for a long time, so its scheduling capabilities are powerful and proven. 
The CronTrigger class is based on the scheduling capabilities of cron.

CronTrigger使用“ cron表达式”，它们可以创建触发计划，例如：“每个星期一至星期五的上午8:00”或“每月的最后一个星期五的上午1:30”  

Cron表达式功能强大，但可能会造成混乱。 本教程旨在消除创建cron表达式的奥秘，为用户提供在访问论坛或邮件列表之前可以访问的资源。  
Cron expressions are powerful, but can be pretty confusing. This tutorial aims to take some of the mystery out of creating a cron expression, 
giving users a resource which they can visit before having to ask in a forum or mailing list.

## Format 格式化

cron表达式是由6或7个用空格隔开的字段组成的字符串。
字段包含下列说明允许范围内的各种组合： 

| **字段名称**| **必填项** | **值域**	| **允许的特殊字符** 	|
|---------------|---------------|-----------------------|-----------------------------------|
| Seconds		| YES			| 0-59 					| , - * /							|
| Minutes		| YES			| 0-59					| , - * /							|
| Hours			| YES			| 0-23					| , - * /							|
| Day of month	| YES			| 1-31					| , - * ? / L W						|
| Month			| YES			| 1-12 or JAN-DEC		| , - * /							|
| Day of week	| YES			| 1-7 or SUN-SAT		| , - * ? / L #						|
| Year			| NO			| empty, 1970-2099		| , - * /							|

因此cron表达式可以像这样简单：`* * * * ? *`  

或更复杂，例如：`0/5 14,18,3-39,52 * ? JAN,MAR,SEP MON-FRI 2002-2010`  

## Special characters 特殊字符
* `*` 所属字段内的任意值. 例如，分钟字段中的“ *”表示“每分钟”.
* `?`（“无特定值”）-当您需要在允许使用字符的两个字段之一中指定某个内容而在另一个不允许的字段中指定某些内容时很有用. 
例如，如果我希望触发器在每月的某个特定日期（例如10号）触发，但不在乎星期几，
我将“ 10”放在“day-of-month”字段中，将“?”放在“day-of-week”字段中。 请参阅下面的示例。
* `-` - 用于指定范围。 例如，小时字段中的“ 10-12”表示“每小时中的10、11和12分钟”。.
* `,` - 用于指定其他值。例如，“day-of-week”字段中的`MON,WED,FRI`表示“星期一、星期三和星期五”  
* `/` - 用于指定增量。 例如，seconds字段中的“ 0/15”表示“每分钟的0、15、30和45秒".  
“seconds”字段中的“ 5/15”表示“每分钟的5、20、35和50秒”  
    您也可以在“字符-之后添加`/`，等同于在'/'之前加上'0'  
    day-of-month字段中的“ 1/3”表示“从该月的第一天开始每三天触发一次”  
* `L` ("last") - 在允许使用的两个字段中，每个字段都有不同的含义。
例如，“day-of-month”字段中的值“ L”表示“月的最后一天”，即非闰年的1月31日，2月28日。
如果单独在“星期几”字段中使用，则仅表示“ 7”或“ SAT”。 但是，如果在星期几字段中使用另一个值，则表示“该月的最后xxx天”-
例如，“ 6L”表示“每月的最后一个星期五”。   
您还可以指定与该月最后一天的偏移量，例如“ L-3”，表示月度的倒数第三天。   
使用`L`选项时，重要的是不要指定列表或值的范围，因为结果可能会使你困惑  
* `W` ("weekday") - 用于指定最接近给定日期的工作日（星期一至星期五）。
例如，如果您将“ 15W”指定为“day-of-month”字段的值，则含义是：“离月15日最近的工作日”。
因此，如果15号是星期六，则触发器将在14号星期五触发。 如果15日是星期日，则触发器将在16日星期一触发。 如果15号是星期二，
然后它将在15日星期二开火。 但是，如果您将“ 1W”指定为day-of-month的值，并且第一个是星期六，则触发器将在第3个星期一触发，
因为它不会在一个月的工作范围内“跳跃”。 仅当月份中的某天是一天，而不是范围或天数列表时，才可以指定“ W”字符.  
::: tip
 `L`和 `W` 字符也可以在“day-of-month”字段中组合以产生“ LW”，表示* *“每月的最后一个工作日  
:::
* `#` - 用于指定每月的“第n个” XXX天  
例如，“星期几”字段中的值“ 6＃3”表示“每月的第三个星期五”（第6天=星期五，“＃3” =本月的第三个星期五）  
其他示例：“ 2＃1” =该月的第一个星期一，而“ 4＃5” =该月的第五个星期三。
请注意，如果您指定“＃5”，并且该月的指定星期几中没有5个，则该月将不会触发  
::: tip
法定字符以及月份和星期几的名称不区分大小写。 MON与mon相同  
The legal characters and the names of months and days of the week are not case sensitive. MON is the same as mon.
:::

## 示例

| **表达式** 			        | **解释**
|:--------------------------------|:----------------------------------------------------------------------|
| 0 0 12 * * ?				    | 每天中午12点触发|
| 0 15 10 ? * *				    | 每天上午10:15触发|
| 0 15 10 * * ?				    | 每天上午10:15触发|
| 0 15 10 * * ? *			    | 每天上午10:15触发|
| 0 15 10 * * ?				    | 2005年的每天上午10:15触发|
| 0 * 14 * * ?				    | 在每天下午2点到下午2:59期间的每1分钟触发|
| 0 0/5 14 * * ?			    | 在每天下午2点到下午2:55期间的每5分钟触发|
| 0 0/5 14,18 * * ?			    | 在每天下午2点到2:55期间和下午6点到6:55期间的每5分钟触发|
| 0 0-5 14 * * ?			    | 在每天下午2点到下午2:05期间的每5分钟触发|
| 0 10,44 14 ? 3 WED		    | 每年三月的星期三的下午2:10和2:44触发.|
| 0 15 10 ? * MON-FRI		    | 周一至周五的上午10:15触发|
| 0 15 10 15 * ?			    | 每月15日上午10:15触发|
| 0 15 10 L * ?				    | 每月最后一日的上午10:15触发|
| 0 15 10 L-2 * ?			    | 每个月的第二天到最后一天的上午10:15触发|
| 0 15 10 ? * 6L			    | 每月的最后一个星期五上午10:15触发|
| 0 15 10 ? * 6L			    | 每个月最后一个星期五上午10时15分触发|
| 0 15 10 ? * 6L 2002-2005	    | 2002年至2005年的每月的最后一个星期五上午10:15触发|
| 0 15 10 ? * 6#3			    | 每月的第三个星期五上午10:15触发|
| 0 0 12 1/5 * ?			    | 每月每隔5天下午12点（中午）触发, 从每月的第一天开始.|
| 0 11 11 11 11 ?			    | 每11月11日上午11时11分触发.|

::: tip
注意'?'和'*' 在“day-of-week”和“day-of-month”字段中所起的作用！
:::

## Notes 记录

::: warning
支持指定day-of-month和day-of-week的值还不完整（当前您必须在这些字段之一中使用'?'字符）。
:::
::: warning
在早晨的两个小时之间，当您所在的地区发生“夏令时”变化时，请小心设置触发时间（对于美国地区，这通常是凌晨2:00之前和之后的一个小时），因为时间偏移会导致跳跃或重复，这取决于时间是向后移动还是向前跳跃。您可能会发现此wikipedia条目有助于确定您所在地区的具体情况：
[https://secure.wikimedia.org/wikipedia/en/wiki/Daylight_saving_time_around_the_world](https://secure.wikimedia.org/wikipedia/en/wiki/Daylight_saving_time_around_the_world)
:::