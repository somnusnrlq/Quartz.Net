(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{402:function(t,e,a){"use strict";a.r(e);var o=a(42),r=Object(o.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("Quartz以模块化方式进行架构，因此要使其运行，需要将多个组件“绑定”在一起。")]),t._v(" "),a("p",[t._v("在Quartz进行工作之前，需要配置的主要组件是：")]),t._v(" "),a("ul",[a("li",[t._v("ThreadPool")]),t._v(" "),a("li",[t._v("JobStore")]),t._v(" "),a("li",[t._v("DataSources (if necessary)")]),t._v(" "),a("li",[t._v("The Scheduler itself")])]),t._v(" "),a("p",[t._v("自从引入基于任务的作业以来，线程池已发生了很大变化。现在默认实现"),a("code",[t._v("DefaultThreadPool")]),t._v("使用"),a("a",{attrs:{href:"https://docs.microsoft.com/en-us/dotnet/standard/threading/the-managed-thread-pool",target:"_blank",rel:"noopener noreferrer"}},[t._v("CLR's managed thread pool"),a("OutboundLink")],1),t._v("将作业作为任务执行。 你\n可以配置具有最大并发性的池，这有效地限制了可以调度到CLR线程池的并发任务数。 有关如何配置线程池实现的更多详细信息，请参见配置参考。"),a("br"),t._v("\nThread pooling has changed a lot since the Task-based jobs were introduced.\nNow the default implementation, "),a("code",[t._v("DefaultThreadPool")]),t._v(" uses "),a("a",{attrs:{href:"https://docs.microsoft.com/en-us/dotnet/standard/threading/the-managed-thread-pool",target:"_blank",rel:"noopener noreferrer"}},[t._v("CLR's managed thread pool"),a("OutboundLink")],1),t._v(" to execute jobs as tasks.\nYou can configure the pool that have max concurrency, which effectively limits how many concurrent tasks can be scheduled to the CLR's thread pool.\nSee configuration reference for more details on how to configure the thread pool implementation.")]),t._v(" "),a("p",[t._v("在本教程的第9课中讨论了JobStores和DataSources。值得注意的是，所有的JobStores\n实现“IJobStore”接口—如果其中一个绑定的jobstore不符合您的需要，那么您可以创建自己的jobstore。"),a("br"),t._v("\nJobStores and DataSources were discussed in Lesson 9 of this tutorial. Worth noting here, is the fact that all JobStores\nimplement the "),a("code",[t._v("IJobStore")]),t._v(" interface - and that if one of the bundled JobStores does not fit your needs, then you can make your own.")]),t._v(" "),a("p",[t._v("最后，您需要创建Scheduler实例。 调度程序本身需要命名并交给它\nJobStore和ThreadPool的实例。"),a("br"),t._v("\nFinally, you need to create your Scheduler instance. The Scheduler itself needs to be given a name and handed\ninstances of a JobStore and ThreadPool.")]),t._v(" "),a("h2",{attrs:{id:"stdschedulerfactory-标准调度程序工厂"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#stdschedulerfactory-标准调度程序工厂"}},[t._v("#")]),t._v(" StdSchedulerFactory 标准调度程序工厂")]),t._v(" "),a("p",[t._v("StdSchedulerFactory是ISchedulerFactory接口的实现。\n它使用一组属性（“ NameValueCollection”）来创建和初始化Quartz Scheduler。\n这些属性通常存储在文件中或从文件中加载，但是也可以由程序创建并直接交给工厂。\n只需在工厂中调用"),a("code",[t._v("GetScheduler（）")]),t._v("，即可生成调度程序，对其进行初始化（及其ThreadPool，JobStore和DataSources），\n并返回其公共接口的句柄。"),a("br"),t._v(" "),a("code",[t._v("StdSchedulerFactory")]),t._v(" is an implementation of the "),a("code",[t._v("ISchedulerFactory")]),t._v(" interface.\nIt uses a set of properties ("),a("code",[t._v("NameValueCollection")]),t._v(") to create and initialize a Quartz Scheduler.\nThe properties are generally stored in and loaded from a file, but can also be created by your program and handed directly to the factory.\nSimply calling "),a("code",[t._v("GetScheduler()")]),t._v(" on the factory will produce the scheduler, initialize it (and its ThreadPool, JobStore and DataSources),\nand return a handle to its public interface.")]),t._v(" "),a("p",[t._v("您可以在Quartz文档的“配置参考”部分中找到完整的文档。"),a("br"),t._v('\nYou can find complete documentation in the "Configuration Reference" section of the Quartz documentation.')]),t._v(" "),a("h2",{attrs:{id:"directschedulerfactory"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#directschedulerfactory"}},[t._v("#")]),t._v(" DirectSchedulerFactory")]),t._v(" "),a("p",[t._v("DirectSchedulerFactory是另一个ISchedulerFactory实现。 这对于希望创建计划程序的人很有用\n以更具编程性的方式实例化。 通常不建议使用它，原因如下："),a("br"),t._v(" "),a("code",[t._v("DirectSchedulerFactory")]),t._v(" is another "),a("code",[t._v("ISchedulerFactory")]),t._v(" implementation. It is useful to those wishing to create their Scheduler\ninstance in a more programmatic way. Its use is generally discouraged for the following reasons:")]),t._v(" "),a("ul",[a("li",[t._v("它要求用户对自己的工作有更深入的了解，并且")]),t._v(" "),a("li",[t._v("它不允许进行声明式配置-换句话说，您最终对所有调度程序的设置进行了硬编码。")]),t._v(" "),a("li",[t._v("It requires the user to have a greater understanding of what they're doing, and")]),t._v(" "),a("li",[t._v("it does not allow for declarative configuration - or in other words, you end up hard-coding all of the scheduler's settings.")])]),t._v(" "),a("h2",{attrs:{id:"logging-日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logging-日志"}},[t._v("#")]),t._v(" Logging 日志")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("从Quartz.NET 3.1开始，您可以配置使用[Microsoft.Extensions.Logging.Abstractions]（https://www.nuget.org/packages/Microsoft.Extensions.Logging.Abstractions/）代替LibLog。\nAs of Quartz.NET 3.1, you can configure "),a("a",{attrs:{href:"https://www.nuget.org/packages/Microsoft.Extensions.Logging.Abstractions/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Microsoft.Extensions.Logging.Abstractions"),a("OutboundLink")],1),t._v(" to be used instead of LibLog.")])]),t._v(" "),a("h3",{attrs:{id:"liblog-日志库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#liblog-日志库"}},[t._v("#")]),t._v(" LibLog 日志库")]),t._v(" "),a("p",[t._v("Quartz.NET使用"),a("a",{attrs:{href:"https://github.com/damianh/LibLog"}},[t._v(" LibLog库")]),t._v("满足其所有日志记录需求。\nQuartz不会产生太多的日志记录信息-通常仅在初始化期间提供一些信息，并且\n那么仅在作业执行时发送有关严重问题的消息。 为了“调整”日志记录设置\n（例如输出的数量以及输出的位置），您实际上需要配置您选择的日志记录框架，因为LibLog主要将工作委托给\n更完善的日志记录框架，例如log4net，serilog等。"),a("br"),t._v("\nQuartz.NET uses "),a("a",{attrs:{href:"https://github.com/damianh/LibLog"}},[t._v("LibLog library")]),t._v(' for all of its logging needs.\nQuartz does not produce much logging information - generally just some information during initialization, and\nthen only messages about serious problems while Jobs are executing. In order to "tune" the logging settings\n(such as the amount of output, and where the output goes), you need to actually configure your logging framework of choice as LibLog mostly delegates the work to\nmore full-fledged logging framework like log4net, serilog etc.')]),t._v(" "),a("p",[t._v("有关更多信息，请参见"),a("a",{attrs:{href:"https://github.com/damianh/LibLog/wiki"}},[t._v(" LibLog Wiki ")]),t._v("。"),a("br"),t._v("\nPlease see "),a("a",{attrs:{href:"https://github.com/damianh/LibLog/wiki"}},[t._v("LibLog Wiki")]),t._v(" for more information.")]),t._v(" "),a("h3",{attrs:{id:"microsoft-extensions-logging-abstractions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#microsoft-extensions-logging-abstractions"}},[t._v("#")]),t._v(" Microsoft.Extensions.Logging.Abstractions")]),t._v(" "),a("p",[t._v("您可以手动配置Microsoft.Extensions.Logging.Abstractions，也可以使用[Quartz.Extensions.DependencyInjection]（https://www.nuget.org/packages/Quartz.Extensions.DependencyInjection）中提供的服务进行配置。")]),t._v(" "),a("h4",{attrs:{id:"手动配置代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#手动配置代码"}},[t._v("#")]),t._v(" 手动配置代码")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// obtain your logger factory, for example from IServiceProvider")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ILoggerFactory")]),t._v(" loggerFactory "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token range operator"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Quartz 3.1")]),t._v("\nQuartz"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LogContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("SetCurrentLogProvider")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("loggerFactory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Quartz 3.2 onwards")]),t._v("\nQuartz"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Logging"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LogContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("SetCurrentLogProvider")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("loggerFactory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h4",{attrs:{id:"使用microsoft-di集成进行配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用microsoft-di集成进行配置"}},[t._v("#")]),t._v(" 使用Microsoft DI集成进行配置")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[t._v("services"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddQuartz")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("q "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this automatically registers the Microsoft Logging")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);